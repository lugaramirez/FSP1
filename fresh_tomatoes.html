
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Fresh Tomatoes!</title>

    <!-- Bootstrap 3 -->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap-theme.min.css">
    <link href="http://cdnjs.cloudflare.com/ajax/libs/select2/4.0.1/css/select2.min.css" rel="stylesheet" />
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/select2/4.0.1/js/select2.min.js"></script>
    <style type="text/css" media="screen">
        body {
            padding-top: 80px;
        }
        #trailer .modal-dialog {
            margin-top: 50px;
            width: 640px;
            height: 480px;
        }
        .hanging-close {
            position: absolute;
            top: -12px;
            right: -12px;
            z-index: 9001;
        }
        #trailer-video {
            width: 100%;
            height: 100%;
        }
        .movie-tile {
            margin-bottom: 20px;
            padding-top: 20px;
        }
        .movie-tile:hover {
            background-color: #EEE;
            cursor: pointer;
        }
        .scale-media {
            padding-bottom: 56.25%;
            position: relative;
        }
        .scale-media iframe {
            border: none;
            height: 100%;
            position: absolute;
            width: 100%;
            left: 0;
            top: 0;
            background-color: white;
        }
    </style>
</head>

  <body>
    <!-- Main Page Content -->
    <div class="container">
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
          <div class="navbar-header">
            <a class="navbar-brand" href="#">Fresh Tomatoes Movie Trailers</a>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="col-md-8">
          <label>Movie genre(s) to show: </label>
          <select class="genres-droplist" multiple="multiple" style="width:75%"></select>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6 col-lg-4 movie-tile text-center All SciFiThriller" data-trailer-youtube-id="HHcHYisZFLU" data-movie-storyline="The discovery of a clue to mankind's origins on Earth leads ateam of explorers to the darkest parts of the universe. Twobrilliant young scientists lead the expedition. Shaw (NoomiRapace) hopes that they will meet a race of benevolent, godlikebeings who will in some way verify her religious beliefs, whileHolloway (Logan Marshall-Green) is out to debunk any spiritualnotions. However, neither the scientists nor their shipmates areprepared for the unimaginable terrors that await them." data-toggle="modal" data-target="#trailer">
            <img src="http://www.gstatic.com/tv/thumb/movieposters/8815605/p8815605_p_v7_ad.jpg" width="220" height="342">
            <h2>Prometheus</h2>
            <span class="label label-primary" data-genre="SciFi Thriller" data-tag="SciFiThriller">SciFi Thriller</span>
        </div>

        <div class="col-md-6 col-lg-4 movie-tile text-center All SciFi" data-trailer-youtube-id="0vxOhd4qlnA" data-movie-storyline="In Earth's future, a global crop blight and second Dust Bowl areslowly rendering the planet uninhabitable. Professor Brand(Michael Caine), a brilliant NASA physicist, is working on plansto save mankind by transporting Earth's population to a new homevia a wormhole. But first, Brand must send former NASA pilotCooper (Matthew McConaughey) and a team of researchers throughthe wormhole and across the galaxy to find out which of threeplanets could be mankind's new home." data-toggle="modal" data-target="#trailer">
            <img src="http://meetinthelobby.com/wp-content/uploads/2014/11/Interstellar-Teaser-Movie-Poster-Large.jpg" width="220" height="342">
            <h2>Interstellar</h2>
            <span class="label label-primary" data-genre="SciFi" data-tag="SciFi">SciFi</span>
        </div>

        <div class="col-md-6 col-lg-4 movie-tile text-center All SciFi" data-trailer-youtube-id="ej3ioOneTy8" data-movie-storyline="When astronauts blast off from the planet Mars, they leave behindMark Watney (Matt Damon), presumed dead after a fierce storm.With only a meager amount of supplies, the stranded visitor mustutilize his wits and spirit to find a way to survive on thehostile planet. Meanwhile, back on Earth, members of NASA and ateam of international scientists work tirelessly to bring himhome, while his crew mates hatch their own plan for a daringrescue mission." data-toggle="modal" data-target="#trailer">
            <img src="http://t2.gstatic.com/images?q=tbn:ANd9GcTkKPZ7EIOafEsemyn6zTIDeGYthKC_Okgxi1eX6diuOT3xKWXQ" width="220" height="342">
            <h2>The Martian</h2>
            <span class="label label-primary" data-genre="SciFi" data-tag="SciFi">SciFi</span>
        </div>
</div>
    </div>

    <!-- Modals Data -->
    <div class="modal" id="trailer">
      <div class="modal-dialog">
        <div class="modal-content">
          <a href="#" class="hanging-close" data-dismiss="modal" aria-hidden="true">
            <img src="https://lh5.ggpht.com/v4-628SilF0HtHuHdu5EzxD7WRqOrrTIDi_MhEG6_qkNtUK5Wg7KPkofp_VJoF7RS2LhxwEFCO1ICHZlc-o_=s0#w=24&h=24"/>
          </a>
          <div class="scale-media" id="trailer-video-container">
          </div>
          <div class="modal-body text-center" id="movie-storyline">
          </div>
        </div>
      </div>
    </div>

    
    <script type="text/javascript" charset="utf-8">
        // Pause the video when the modal is closed
        $(document).on('click', '.hanging-close, .modal-backdrop, .modal', function (event) {
            // Remove the src so the player itself gets removed, as this is the only
            // reliable way to ensure the video stops playing in IE
            $("#trailer-video-container").empty();
        });
        // Start playing the video whenever the trailer modal is opened
        $(document).on('click', '.movie-tile', function (event) {
            var trailerYouTubeId = $(this).attr('data-trailer-youtube-id')
            var sourceUrl = 'http://www.youtube.com/embed/' + trailerYouTubeId + '?autoplay=1&html5=1';
            $("#trailer-video-container").empty().append($("<iframe></iframe>", {
              'id': 'trailer-video',
              'type': 'text-html',
              'src': sourceUrl,
              'frameborder': 0
            }));
            /* added the storyline description on the modal body */
            $("#movie-storyline").empty().append($("<p>"+$(this).attr('data-movie-storyline')+"</p>"));
        });
        // Animate in the movies when the page loads
        $(document).ready(function () {
          $('.movie-tile').hide().first().show("fast", function showNext() {
            $(this).next("div").show("fast", showNext);
          });
        /* Inits the droplist as a select2 */
          $(".genres-droplist").select2({placeholder: "Select a genre"});
        /* Generates the movie-genre droplist by checking if each label found on the tile
        exists or not already as an option in it */
          $(".label-primary").each(function(){
            var exists = false;
            var genre = $(this).attr('data-genre');
            var tag = $(this).attr('data-tag');
            $(".genres-droplist option").each(function(){
              if ($(this).attr('value') == genre) {
                exists = true;
              }
            });
            if (!exists) {
              $(".genres-droplist").append($("<option value='"+tag+"'>"+genre+"</option>"));
            }
          });
        /* Checks for a change on the select2 and shows whatever is chosen hiding everything else
        by using a cheat hiding first all of the tiles and then showing just the ones selected */
          $(".genres-droplist").on("change", function(){
            if ( $(".genres-droplist").select2("data").length ) {
              $(".All").hide();
              $(".genres-droplist").select2("data").forEach(function(SelectedItem){
                $("."+SelectedItem['id']).show();
              });
            } else {
              $(".All").show();
            }
          });
          
        });
    </script>


  </body>
</html>
